# 下载地址

[cdh5](http://archive.cloudera.com/cdh5/parcels/latest/)

# 安装

1. 启动httpd
```
yum install httpd
systemctl status httpd
systemctl start httpd
```
所属目录：/var/www/html

2. 创建/var/www/html/cdh{version}文件夹，进入
下载对应版本rpm包
```
https://archive.cloudera.com/cm6/6.2.1/redhat7/yum/RPMS/x86_64/
wget http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.11.1/RPMS/x86_64/cloudera-manager-agent-5.11.1-1.cm5111.p0.9.el6.x86_64.rpm
wget http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.11.1/RPMS/x86_64/cloudera-manager-daemons-5.11.1-1.cm5111.p0.9.el6.x86_64.rpm
wget http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.11.1/RPMS/x86_64/cloudera-manager-server-5.11.1-1.cm5111.p0.9.el6.x86_64.rpm
wget http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.11.1/RPMS/x86_64/cloudera-manager-server-db-2-5.11.1-1.cm5111.p0.9.el6.x86_64.rpm
wget http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.11.1/RPMS/x86_64/enterprise-debuginfo-5.11.1-1.cm5111.p0.9.el6.x86_64.rpm
wget http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.11.1/RPMS/x86_64/jdk-6u31-linux-amd64.rpm
wget http://archive.cloudera.com/cm5/redhat/6/x86_64/cm/5.11.1/RPMS/x86_64/oracle-j2sdk1.7-1.7.0+update67-1.x86_64.rpm
```


3. 下载createrepo
yum install createrepo

4. 进入/var/www/html/cdh{version}文件夹
```
createrepo  .
```

5. 配置/etc/yum.repos.d/cloudera-manager.repo文件，内容如下
```
[cloudera-manager]
name = Cloudera Manager, Version 6.2.1
baseurl =  http://master/cdh6.2.1/
baseurl = file:///opt/cm
gpgcheck = 0
```

6. 测试yum源是否正常
```
yum clean  all
yum  makecache
```


7. 安装Cloudera Manager Server
```
yum -y  install cloudera-manager-server cloudera-manager-daemons  cloudera-manager-agent
```


8. 配置数据库
cd /etc/cloudera-scm-server


[安装数据库](https://blog.csdn.net/SYXDWT/article/details/87887253)
cloudera-scm-agent start
[创建数据库并添加用户](https://blog.csdn.net/weixin_42194239/article/details/103048808)


9. 添加mysql-connect.jar

将jar包放到/usr/share/java目录下

10. 日志文件 
/var/log/cloudera-scm-server

create database cm6 default character set utf8;
CREATE USER 'am'@'%' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON am. * TO 'am'@'%';
FLUSH PRIVILEGES;


systemctl restart cloudera-scm-server
systemctl stop cloudera-scm-server
systemctl status cloudera-scm-server

systemctl start cloudera-scm-agent
systemctl status cloudera-scm-agent
systemctl restart cloudera-scm-agent
systemctl stop cloudera-scm-agent


http://archive.cloudera.com/cdh5/parcels/latest/








# 初始化数据库

修改vim /etc/cloudera-scm-server/db.properties
注释掉#com.cloudera.cmf.db.setupType=EXTERNAL
重启


